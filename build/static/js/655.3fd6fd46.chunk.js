"use strict";(self.webpackChunkgenie=self.webpackChunkgenie||[]).push([[655],{5018:function(e,n,t){t.d(n,{A:function(){return u},Z:function(){return p}});var a=t(1413),r=t(5987),l=t(2791),i=t(6151),s={mainPrimary:"#009dba",common:"Button_common__sJdcN",actionSecondaryFormBtn:"Button_actionSecondaryFormBtn__UO6Qe",actionListingBtn:"Button_actionListingBtn__kuQqS",actionFormBtn:"Button_actionFormBtn__7wdO3"},o=t(184),c=["classType","className","label"],u={ACTION_LISTING_BTN:"actionListingBtn",ACTION_FORM_BTN:"actionFormBtn",ACTION_SECONDARY_FORM_BTN:"actionSecondaryFormBtn"},d=function(e){var n=e.classType,t=e.className,l=void 0===t?null:t,u=e.label,d=(0,r.Z)(e,c),p="".concat(s.common," ").concat(n?s[n]:""," ").concat(l||"");return(0,o.jsx)(i.Z,(0,a.Z)((0,a.Z)({variant:"contained",className:"".concat(p)},d),{},{children:u}))},p=l.memo(d)},8655:function(e,n,t){t.r(n),t.d(n,{default:function(){return Tn}});var a=t(885),r=t(2791),l=t(4554),i=t(1889),s=t(1413),o=t(4165),c=t(5861),u=t(2982),d=t(266),p=t(3517),f=t(5018),m=t(6906),h=t(5987),x="RowContainer_RowWrapper__oH+3q",v=t(184),_=["children","className"],j=function(e){var n=e.children,t=e.className,a=(0,h.Z)(e,_);return(0,v.jsx)("div",(0,s.Z)((0,s.Z)({className:x+" "+t},a),{},{children:n}))},N=r.memo(j),Z="DeviceName_compWrapper__nxjhj",g="DeviceName_AddressWrapper__JGU1K",b="DeviceName_DeviceName__mLF+A",S="DeviceName_BoxPosition__F3XFI",C="DeviceName_ActionWrapper__P0m6h",R="DeviceName_BoxButtons__4tDg6",w="DeviceName_RackDropDown__TLJpP",D="RockCell_CellWrapper__SbJSo",y=["option"],T=function(e){var n=e.option,t=(0,h.Z)(e,y);return(0,v.jsx)("div",(0,s.Z)((0,s.Z)({className:D},t),{},{children:(0,v.jsx)("div",{children:n.name})}))},A={mainPrimary:"#009dba",PageWrapper:"Wells_PageWrapper__buYX9",Well:"Wells_Well__t1Afh",activeWell:"Wells_activeWell__Ko7b9",TooltipText:"Wells_TooltipText__Tauoe",Wells:"Wells_Wells__Ynu2E",EmptyState:"Wells_EmptyState__riU1X"},E=t(2168),M=t(68),L=t(4942),W=function(e,n,t){return e.find((function(e){return e[n]===t}))},I=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{day:"2-digit",month:"short",year:"numeric"};return new Date(e).toLocaleDateString("en-US",n)},O=function(e,n){if(e&&n){var t=(0,u.Z)(e);switch(n){case"placed":return t.filter((function(e){return!!e.locationId}));case"unplaced":return t.filter((function(e){return!e.locationId}));case"expired":return t.filter((function(e){return!0===e.expired}));default:return t}}},k=function(e,n){if(e&&n){var t=(0,u.Z)(n);return t.map((function(n){return n.count=O(e,n.key).length})),t}},B=function(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],r=0;r<e;r++)a.push((0,s.Z)((0,s.Z)({},t),{},{number:r+1,name:n+" "+(r+1)}));return a},F=function(e,n){for(var t=function(e){for(var n=Math.sqrt(e),t=[],a=0,r=0,l=0;l<n;l++){a=l+1;for(var i=0,s=0;s<n;s++)r+=1,i=a+s*n,t.push((0,L.Z)({},r,i))}return t}(n),a=[],r=0;r<t.length;r++)e.includes(t[r][r+1].toString())&&a.push(t[r][r+1]);return a},P=function(e,n,t){if(!e||!t||!n)return new Error("you should send all prams to make function work");var a=(0,u.Z)(e);return n.map((function(e){var n=a.findIndex((function(n){return n[t]===e[t]}));n>-1&&(a[n]=e)})),a},U="WellsStatus_WellStatus__TeLs9",H="WellsStatus_Unplaced__a59fX",G="WellsStatus_Placed__zqsE4",X=function(e){var n=e.unplaced,t=e.placed;return(0,v.jsx)("div",{className:U,children:(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{className:H,children:[(0,v.jsx)("span",{})," Unplaced (",n,")"]}),(0,v.jsxs)("p",{className:G,children:[(0,v.jsx)("span",{})," Placed (",t,")"]})]})})},q=(0,r.memo)(X),Y=function(e){var n=e.well,t=(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("p",{className:A.TooltipText,children:["Material : ".concat(n.materialName)," ",(0,v.jsx)("br",{}),"Strain : ".concat(n.materialStrainName)," ",(0,v.jsx)("br",{}),"Hand-Off Date : ".concat(I(n.handoffDate))]})});return n.locationId?(0,v.jsx)(M.Z,{title:t,placement:"top",className:A.Tooltip,children:(0,v.jsx)("div",{className:A.Well+" "+A.activeWell,children:n.number})}):(0,v.jsx)("div",{className:A.Well+" cube",children:n.number})},V=function(e){var n=e.row;return(0,v.jsx)("div",{className:A.WellRow,children:n.map((function(e,t){return(0,v.jsx)(Y,{well:e,number:e.number},n[t].number)}))})},z=(0,r.forwardRef)((function(e,n){var t=e.selectedCellsFun,l=e.numOfWells,i=e.activeWells,d=e.wellStatusFun,p=(0,r.useRef)(null),f=function(e,n,t){for(var a=Math.sqrt(n),r=[],l={placed:0,unplaced:0},i=0;i<a;i++){r.push({row:[],number:i});for(var o=0;o<a;o++){var c=i*a+(o+1);W(t,"well",c.toString())?(r[i].row.push((0,s.Z)((0,s.Z)({},e),{},{number:c},W(t,"well",c.toString()))),l.placed++):(r[i].row.push((0,s.Z)((0,s.Z)({},e),{},{number:c})),l.unplaced++)}}return[r,l]}({number:0},l,i),h=(0,a.Z)(f,2),x=h[0],_=h[1];(0,r.useImperativeHandle)(n,(function(){return{resetWells:j}}));var j=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.getElementsByClassName(A.Well);case 2:n=e.sent,(0,u.Z)(n).map((function(e){e.classList.remove("selected")})),t([]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useMemo)((function(){d(_),j()}),[_.unplaced]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(E.ZP,{dragContainer:".elements",selectableTargets:[".selecto-area .cube"],hitRate:100,selectByClick:!0,selectFromInside:!0,toggleContinueSelect:["shift"],ratio:0,onSelect:function(e){e.added.forEach((function(n){n.classList.add("selected"),t(e.selected)})),e.removed.forEach((function(n){n.classList.remove("selected"),t(e.selected)}))}}),(0,v.jsx)("div",{className:A.PageWrapper+" elements selecto-area",id:"selecto1",children:x.length?(0,v.jsx)("div",{className:A.WellRow,ref:p,children:x.map((function(e,n){var t=e.row;return(0,v.jsx)(V,{row:t},n)}))}):(0,v.jsx)("p",{className:A.EmptyState,children:m.qX.WELLS})}),(0,v.jsx)(q,{unplaced:_.unplaced,placed:_.placed})]})})),K=(0,r.memo)(z),J=t(8687),Q=t(4569),$=t.n(Q),ee=t(4505);function ne(e,n,t){return $().get("".concat(ee.WI.BASE_URL,"?transFreezerId=").concat(e,"&rack=").concat(n,"&box=").concat(t))}var te=t(2740),ae=t(6081),re=t(703),le="SelectInputChange_basicClass__N0xj4",ie=["options","value","optionsWidth","presentsProps","propsType","label","disabled","placeholder","onChange"],se=(0,r.forwardRef)((function(e,n){var t=e.options,l=e.value,i=void 0===l?null:l,o=e.optionsWidth,c=void 0===o?"100%":o,u=e.presentsProps,d=void 0===u?"name":u,p=e.propsType,f=void 0===p?"name":p,m=e.label,x=void 0===m?null:m,_=e.disabled,j=void 0!==_&&_,N=e.placeholder,Z=e.onChange,g=(0,h.Z)(e,ie),b=(0,r.useState)(""),S=(0,a.Z)(b,2),C=S[0],R=S[1],w=(0,r.useState)(i),D=(0,a.Z)(w,2),y=D[0],T=D[1];(0,r.useEffect)((function(){return T(i)}),[i]);var A=function(e,n){Z(e,n),T(n)};(0,r.useImperativeHandle)(n,(function(){return{clearSelect:E}}));var E=function(){R("")};return(0,v.jsx)("div",{className:le,children:t&&(0,v.jsx)(te.Z,(0,s.Z)({disabled:j||!t.length,inputValue:C,value:null!==y&&void 0!==y?y:null,onInputChange:function(e,n){R(n)},onChange:function(e,n){return A(e,n)},options:t.map((function(e){return"name"===f?e[d]:e})),renderInput:function(e){return(0,v.jsx)(ae.Z,(0,s.Z)((0,s.Z)({},e),{},{placeholder:N,label:x}))},PaperComponent:function(e){return(0,v.jsx)(re.Z,(0,s.Z)((0,s.Z)({},e),{},{sx:{width:c}}))},getOptionLabel:function(e){return"name"===f?e:e[d]}},g))})})),oe=r.memo(se),ce=function(e){var n=e.children,t=e.allowedRoles,a=e.defaultComponent,r=void 0===a?null:a,l=(0,J.v9)((function(e){return e.user.roles}));return l&&l.some((function(e){return t.includes(e)}))?n:r},ue=t(5891),de=function(e){var n,t=e.wellsInfoFn,l=e.deviceConfigRedux,i=e.wellsRedux,h=(0,r.useState)([]),x=(0,a.Z)(h,2),_=x[0],j=x[1],D=(0,r.useState)(),y=(0,a.Z)(D,2),A=y[0],E=y[1],M=(0,r.useState)(null),L=(0,a.Z)(M,2),W=L[0],I=L[1],O=(0,r.useState)([]),k=(0,a.Z)(O,2),F=k[0],P=k[1],U=(0,r.useState)(),H=(0,a.Z)(U,2),G=H[0],X=H[1],q=(0,r.useState)(null),Y=(0,a.Z)(q,2),V=Y[0],z=Y[1],J=(0,r.useState)([]),Q=(0,a.Z)(J,2),$=Q[0],ee=Q[1],te=(0,r.useState)({}),ae=(0,a.Z)(te,2),re=ae[0],le=ae[1],ie=(0,r.useRef)(),se=(0,r.useRef)(),de=(0,r.useRef)();(0,r.useEffect)((function(){null!==i&&void 0!==i&&i.length&&ee((function(e){return[].concat((0,u.Z)(e),(0,u.Z)(i))}))}),[i]);var pe=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(n,t,a){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(n,t,a);case 2:r=e.sent,ee(r),de.current.resetWells();case 5:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),fe=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(n,t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(null===t||void 0===t?void 0:t.number),l&&t&&null!==V){e.next=3;break}return e.abrupt("return");case 3:pe(l.id,t.number,V);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),me=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(n,t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z(null===t||void 0===t?void 0:t.number),l&&t&&null!==V){e.next=3;break}return e.abrupt("return");case 3:pe(l.id,W,t.number);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),he=function(){},xe=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){var n,t,a,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(l.numOfRacks,"Rack",{});case 2:return n=e.sent,e.next=5,B(l.numOfBoxes,"Box",{});case 5:return t=e.sent,e.next=8,n[+(null===l||void 0===l?void 0:l.defaultRack)-1];case 8:return a=e.sent,e.next=11,t[+(null===l||void 0===l?void 0:l.defaultBox)-1];case 11:return r=e.sent,e.next=14,E(a);case 14:return e.next=16,X(r);case 16:return e.next=18,z(null===r||void 0===r?void 0:r.number);case 18:return e.next=20,I(null===a||void 0===a?void 0:a.number);case 20:return e.next=22,pe(l.id,a.number,r.number);case 22:return e.next=24,j(n);case 24:return e.next=26,P(t);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){l&&xe()}),[l]);var ve=(0,r.useCallback)((function(e){setTimeout((function(){return le(e)}),0)}),[le]),_e=function(e,n){return(0,v.jsx)("li",(0,s.Z)((0,s.Z)({},e),{},{children:(0,v.jsx)(T,{option:n},n.id)}))};return(0,v.jsxs)("div",{className:Z,children:[(0,v.jsx)(N,{children:(0,v.jsx)(d.Z,{maxWidth:"100%",children:(0,v.jsxs)(p.Z,{children:[(0,v.jsx)("p",{className:b,children:null!==(n=null===l||void 0===l?void 0:l.name)&&void 0!==n?n:"Device name"}),(0,v.jsx)(oe,{className:w,optionsWidth:"200px",ref:ie,disableClearable:!0,renderOption:_e,value:A,placeholder:m.yb.SELECT_RACK,propsType:"object",options:_,onChange:fe}),(0,v.jsx)(oe,{className:w,optionsWidth:"200px",ref:se,placeholder:m.yb.SELECT_BOX,disableClearable:!0,renderOption:_e,value:G,options:F,propsType:"object",onChange:me})]})})}),(0,v.jsx)(N,{children:(0,v.jsxs)(d.Z,{maxWidth:"100%",className:g,children:[(0,v.jsxs)("p",{className:S,children:[V?"Box "+V:m.yb.SELECT_BOX,(0,v.jsx)("span",{children:(null===re||void 0===re?void 0:re.unplaced)+" unplaced "})]}),(0,v.jsx)(ce,{allowedRoles:ue.qj,children:(0,v.jsxs)("div",{className:C,children:[(0,v.jsx)(f.Z,{className:R,onClick:he,label:m.lc.UNPLACE,classType:f.A.ACTION_SECONDARY_FORM_BTN}),(0,v.jsx)(f.Z,{onClick:he,label:m.lc.UNPLACE_EXPIRECONTENT,classType:f.A.ACTION_SECONDARY_FORM_BTN,className:R})]})})]})}),(0,v.jsx)(d.Z,{maxWidth:"100%",children:(0,v.jsx)(K,{ref:de,selectedCellsFun:function(e){var n={transFreezerFK:null===l||void 0===l?void 0:l.id,numOfWells:null===l||void 0===l?void 0:l.numOfWells,wells:e,rack:W,box:V};t(n)},activeWells:$,wellStatusFun:ve,numOfWells:(null===l||void 0===l?void 0:l.numOfWells)||0})})]})},pe=(0,J.$j)((function(e){return{deviceConfigRedux:e.deviceConfig.deviceConfig,wellsRedux:e.materials.wells}}),null)((0,r.memo)(de)),fe=t(6598),me=t(7161),he=t(6586);function xe(e){return{type:he.n_,materials:e}}function ve(e){return{type:he.x_,material:e}}function _e(){return{type:he.uX}}function je(e){return{type:he.YA,material:e}}function Ne(e){return{type:he.o9,loadingFlag:e}}var Ze=t(5228),ge=t(3896),be="CustomTabs_CustomTabsWrapper__nk5r8",Se=(0,r.forwardRef)((function(e,n){var t=e.tabList,l=void 0===t?[]:t,i=e.selectHandler,s=(0,r.useState)(l[0].key),o=(0,a.Z)(s,2),c=o[0],u=o[1],d=function(){return u(l[0].key)};return(0,r.useImperativeHandle)(n,(function(){return{resetTabs:d}})),(0,v.jsx)("div",{className:be,children:(0,v.jsx)(Ze.Z,{value:c,onChange:function(e,n){u(n),i(n)},children:l.map((function(e,n){return(0,v.jsx)(ge.Z,{value:e.key,label:"".concat(e.label," (").concat(e.count,") ")},n)}))})})})),Ce=r.memo(Se),Re="SearchBar_boxWrapper__Q7FJf",we="SearchBar_inputBlock__hJ9Bv",De="SearchBar_searchICON__K0PYu",ye="SearchBar_clearBtn__qytTA",Te=t(5403),Ae=(0,r.forwardRef)((function(e,n){var t=e.classes,l=e.placeholder,i=e.onSearchFun,s=(e.clearInput,(0,r.useState)("")),o=(0,a.Z)(s,2),c=o[0],u=o[1],d=function(){u(""),i("")};return(0,r.useImperativeHandle)(n,(function(){return{clearInput:d}})),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:Re,children:(0,v.jsxs)("div",{className:we+" "+t,children:[(0,v.jsx)(Te.Z,{className:De}),(0,v.jsx)("input",{type:"text",placeholder:l,onChange:function(e){var n=e.target.value;i(n),u(n)},value:c}),c&&(0,v.jsx)(f.Z,{label:m.lc.CLEAR,className:ye,color:"primary",disableElevation:!0,onClick:d})]})})})})),Ee=(0,r.memo)(Ae),Me="MaterialList_MaterialListWrapper__z3oBl",Le="MaterialList_EmptyState__xdjEy",We="MaterialList_Loading__mVg5c",Ie={mainPrimary:"#009dba",MaterialRowWrapper:"MaterialRow_MaterialRowWrapper__CMOk8",MaterialName:"MaterialRow_MaterialName__MStTF",MaterialLocation:"MaterialRow_MaterialLocation__Hxabz",DateSide:"MaterialRow_DateSide__m06PE",MaterialDate:"MaterialRow_MaterialDate__EbVsM",Selected:"MaterialRow_Selected__BsVSu"},Oe=function(e){var n=e.material,t=e.index,a=e.updateCurrentMaterialFn,r=e.setSelectedMaterialsFn,l=n,i="".concat(Ie.MaterialRowWrapper," ").concat(l.selected?Ie.Selected:"");return(0,v.jsxs)("div",{className:i,onClick:function(){a({material:n,index:t}),r(n)},children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{className:Ie.MaterialName,children:[l.materialName," ",l.expired&&(0,v.jsxs)("span",{children:["Expired ",l.expired_date&&"on ".concat(l.expired_date)]})]}),l.locationId?(0,v.jsx)("p",{className:Ie.MaterialLocation,children:(0,v.jsxs)("span",{children:[l.transFreezerName,"  / Rack ",l.rack," / Box ",l.box," / Well ",l.well]})}):(0,v.jsx)("p",{className:Ie.MaterialLocation,children:" Unplaced"})]}),(0,v.jsxs)("div",{className:Ie.DateSide,children:[(0,v.jsx)("p",{className:Ie.MaterialCell,children:l.materialStrainName}),(0,v.jsx)("p",{className:Ie.MaterialDate,children:I(l.handoffDate)})]})]})},ke={updateCurrentMaterialFn:je,setSelectedMaterialsFn:ve},Be=(0,J.$j)(null,ke)((0,r.memo)(Oe)),Fe=function(e){var n=e.filteredMaterials,t=e.isLoading,a=e.progressLoading;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:Me,children:[(t||a)&&(0,v.jsxs)("div",{className:We,children:[" ",m.br," "]}),null!==n&&void 0!==n&&n.length?n.map((function(e,n){return(0,v.jsx)(Be,{material:e,index:n},e.id)})):(0,v.jsx)("p",{className:Le,children:m.qX.MATERIALS})]})})},Pe=(0,J.$j)((function(e){return{filteredMaterials:e.materials.filteredMaterials,isLoading:e.materials.isLoadingMaterials}}),null)((0,r.memo)(Fe)),Ue="SelectInput_basicClass__ZwvtK",He=["options","optionsWidth","presentsProps","propsType","value","defaultValue","label","disabled","placeholder","onChange"],Ge=(0,r.forwardRef)((function(e,n){var t=e.options,l=e.optionsWidth,i=void 0===l?"100%":l,o=e.presentsProps,c=void 0===o?"name":o,u=e.propsType,d=void 0===u?"name":u,p=(e.value,e.defaultValue),f=void 0===p?null:p,m=e.label,x=void 0===m?null:m,_=e.disabled,j=void 0!==_&&_,N=e.placeholder,Z=e.onChange,g=(0,h.Z)(e,He),b=(0,r.useState)(""),S=(0,a.Z)(b,2),C=S[0],R=S[1],w=function(e,n){Z(e,n)};(0,r.useEffect)((function(){"object"===typeof f&&Z("setDefualt",f)}),[f]),(0,r.useImperativeHandle)(n,(function(){return{clearSelect:D,setValue:function(e){setTimeout((function(){return R(e)}),1e3)}}}));var D=function(){R(""),Z(null,"")};return(0,v.jsxs)("div",{className:Ue,children:[t&&f&&(0,v.jsx)(te.Z,(0,s.Z)({disabled:j||!t.length,inputValue:C,onInputChange:function(e,n){R(n)},onChange:function(e,n){return w(e,n)},defaultValue:null!==f&&void 0!==f?f:null,options:t.map((function(e){return"name"===d?e[c]:e})),renderInput:function(e){return(0,v.jsx)(ae.Z,(0,s.Z)((0,s.Z)({},e),{},{placeholder:N,label:x}))},PaperComponent:function(e){return(0,v.jsx)(re.Z,(0,s.Z)((0,s.Z)({},e),{},{sx:{width:i}}))},getOptionLabel:function(e){return"name"===d?e:e[c]}},g)),!f&&(0,v.jsx)(te.Z,(0,s.Z)({disabled:j||!t.length,inputValue:C,onInputChange:function(e,n){e&&R(n)},onChange:function(e,n){return w(e,n)},options:t.map((function(e){return"name"===d?e[c]:e})),renderInput:function(e){return(0,v.jsx)(ae.Z,(0,s.Z)((0,s.Z)({},e),{},{placeholder:N,label:x}))},PaperComponent:function(e){return(0,v.jsx)(re.Z,(0,s.Z)((0,s.Z)({},e),{},{sx:{width:i}}))},getOptionLabel:function(e){return"name"===d?e:e[c]}},g))]})})),Xe=r.memo(Ge),qe="DNAMaterials_compWrapper__wgZD3",Ye="DNAMaterials_ShowWrapper__O+IOD",Ve="DNAMaterials_FilterSide__O2yOh",ze="DNAMaterials_SortSide__VKoun",Ke="DNAMaterials_StrainDropDown__koJgi",Je="DNAMaterials_PeriodDropDown__2fkno",Qe="DNAMaterials_sortDropDown__gc-SO",$e="DNAMaterials_ButtonsWrapper__AAvE4",en="DNAMaterials_PlacesButtonsWrapper__9D5c1",nn="DNAMaterials_PlacesButton__0FCCW",tn="DNAMaterials_SearchWrapper__1P00I",an="DNAMaterials_Counter__VjMjC",rn="DNAMaterials_WarningMessage__ekK-Z",ln=t(5473),sn=t(4070),on=t(5646),cn=function(e){var n=e.open,t=e.alertInfo,l=void 0===t?{status:"success",message:""}:t,i="top",s="center",o=(0,r.useState)(!1),c=(0,a.Z)(o,2),u=c[0],d=c[1];return(0,r.useEffect)((function(){d(!0),setTimeout((function(){d(!1)}),3e3)}),[l]),(0,v.jsx)(on.Z,{open:n&&u,anchorOrigin:{vertical:i,horizontal:s},autoHideDuration:2e3,children:(0,v.jsx)(sn.Z,{severity:l.status,sx:{width:"100%"},children:l.message})})},un=(0,r.memo)(cn),dn=t(5289),pn=t(5201),fn=t(7123);function mn(e){var n=e.title,t=e.isOpen,a=e.handleCancelDialog,r=e.handleConfirmAction;return(0,v.jsx)("div",{children:(0,v.jsxs)(dn.Z,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,v.jsx)(pn.Z,{id:"alert-dialog-title",children:n}),(0,v.jsxs)(fn.Z,{children:[(0,v.jsx)(f.Z,{onClick:a,classType:f.A.ACTION_SECONDARY_FORM_BTN,label:m.B8,disableElevation:!0}),(0,v.jsx)(f.Z,{onClick:r,label:m.qM,disableElevation:!0})]})]})})}var hn=[{id:"1",name:"Construct Number (Highest)",key:"descending"},{id:"2",name:"Construct Number (Lowest)",key:"ascending"},{id:"3",name:"Hand-Off Date (Newest)",key:"nto"},{id:"3",name:"Hand-Off Date (Oldest)",key:"otn"}],xn=[{label:m.TG.ALL,key:"all",count:0},{label:m.TG.PLACED,key:"placed",count:0},{label:m.TG.UNPLACED,key:"unplaced",count:0},{label:m.TG.EXPIRED,key:"expired",count:0}],vn=function(e){var n,t=e.wellsInfo,l=e.materialListRedux,o=e.filteredMateriaRedux,c=e.groupedMateriaRedux,d=e.strainList,p=void 0===d?[]:d,h=e.setGroupSelectedMaterialsFn,x=(e.setSelectedMaterialsFn,e.sortMaterialsFn),_=e.updateAllMaterialsFn,j=e.updateActiveWellsFn,Z=e.setSearchOnMaterialsFn,g=e.selectedMaterials,b=e.resetSelectedMaterialsFn,S=e.selectedType,C=(e.selectedCropType,(0,r.useState)(m.yb.PERIOD)),R=(0,a.Z)(C,2),w=R[0],D=R[1],y=(0,r.useState)(xn),T=(0,a.Z)(y,2),A=T[0],E=T[1],M=(0,r.useState)(!1),L=(0,a.Z)(M,2),W=L[0],I=L[1],B=(0,r.useState)([]),U=(0,a.Z)(B,2),H=U[0],G=U[1],X=(0,r.useState)(!1),q=(0,a.Z)(X,2),Y=q[0],V=q[1],z=(0,r.useMemo)((function(){var e;return function(e){var n;e&&(n=e.map((function(e){return null===e||void 0===e?void 0:e.innerText})),G(n))}(null===t||void 0===t?void 0:t.wells),(null===t||void 0===t||null===(e=t.wells)||void 0===e?void 0:e.length)||0}),[null===t||void 0===t?void 0:t.wells]),K=(0,r.useMemo)((function(){return g.length||0}),[g]),J=(0,r.useRef)(),Q=(0,r.useRef)(),ne=(0,r.useRef)(),te=(0,r.useRef)(),ae=(0,r.useState)(null),re=(0,a.Z)(ae,2),le=re[0],ie=re[1],se=(0,r.useState)({dateRange:{startDate:new Date,endDate:new Date,key:"dateRange"}}),oe=(0,a.Z)(se,2),de=oe[0],pe=oe[1],he=(0,r.useState)(!1),xe=(0,a.Z)(he,2),ve=xe[0],_e=xe[1],je=(0,r.useState)({status:"success",message:""}),Ne=(0,a.Z)(je,2),Ze=Ne[0],ge=Ne[1],be=(0,r.useState)(!1),Se=(0,a.Z)(be,2),Re=Se[0],we=Se[1],De=function(e,n){_e(!0),ge({status:e,message:n})};(0,r.useEffect)((function(){V(K>z||z<=0||K<=0)}),[K,z]);var ye=function(){ie(!1)},Te=Boolean(le),Ae=Te?"simple-popover":void 0,Me=function(){J.current.clearInput(),Q.current.clearSelect(),ne.current.clearSelect(),te.current.resetTabs(),D(m.yb.PERIOD)};(0,r.useEffect)((function(){Me()}),[l]);var Le=function(e){o&&null!==e&&void 0!==e&&e.key&&(I(!0),setTimeout((function(){return x(function(e,n){if(e&&n){var t=(0,u.Z)(e);switch(n){case"ascending":return t.sort((function(e,n){return+e.constructName-+n.constructName}));case"descending":return t.sort((function(e,n){return n.constructName-e.constructName}));case"nto":return t.sort((function(e,n){return new Date(n.handoffDate)-new Date(e.handoffDate)}));case"otn":return t.sort((function(e,n){return new Date(e.handoffDate)-new Date(n.handoffDate)}));default:return t}}}(o,null===e||void 0===e?void 0:e.key)),I(!1)}),0))},We=function(e){if(pe((0,s.Z)((0,s.Z)({},de),e)),l&&e.dateRange){var n={start:e.dateRange.startDate,end:e.dateRange.endDate};e.dateRange.startDate.getDay()===e.dateRange.endDate.getDay()?(n.start=new Date("Dec 1, 1990"),n.end=e.dateRange.startDate):(D(e.dateRange.startDate.toLocaleDateString()+" - "+e.dateRange.endDate.toLocaleDateString()),ye()),x(function(e,n,t){if(e&&n&&t){var a=(0,u.Z)(e),r=new Date(n),l=new Date(t);return a.filter((function(e){var n=new Date(e.handoffDate);return n>=r&&n<=l}))}}(l,n.start,n.end))}};(0,r.useEffect)((function(){l&&E(k(l,xn))}),[l]);var Ie=(0,r.useCallback)(function(e){var n;return function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var l=this;n&&clearTimeout(n),n=setTimeout((function(){n=null,e.apply(l,a)}),500)}}((function(e){var n,t,a;Z(c&&""!==e?(t="constructName",a=e,(n=c)&&t&&a?(0,u.Z)(n).filter((function(e){return e[t].includes(a)})):new Error("you should send all prams to make function work")):c)})),[l,c]),Oe=function(e){var n,a=!0;"across"===e?n=H.sort((function(e,n){return e-n})):n=F(H,t.numOfWells);var r,i=g.map((function(e,r){return null!==e&&void 0!==e&&e.locationId||null!==e&&void 0!==e&&e.expired?(De("error",m.c9.CAN_NOT_PLACE_MATERIAL),a=!1):{transFreezerFK:t.transFreezerFK,rack:t.rack,box:t.box,wellPos:n[r],agroGlycerol:e.id}}));a&&(V(!0),(r=i,$().post(ee.BM.BASE_URL,r)).then((function(e){_(P(l,e,"id")),j(e),De("success",m.nS.PLACE_MATERIAL)})).catch((function(e){De("error",m.c9.CAN_NOT_PLACE_MATERIAL)})).finally((function(){setTimeout((function(){return _e(!1)}),5e3)})),V(!1))};return(0,v.jsxs)("div",{className:qe,children:[(0,v.jsx)(N,{children:(0,v.jsxs)(fe.Z,{maxWidth:"100%",className:tn,children:[(0,v.jsx)(Ee,{ref:J,placeholder:m.l4.PLACEHOLDER+(null!==(n=null===S||void 0===S?void 0:S.name)&&void 0!==n?n:"")+" Material",onSearchFun:function(e){return Ie(e)}}),(0,v.jsx)(f.Z,{onClick:function(){_(l),o&&E(k(o,xn)),Me()},label:m.lc.CLEAR_FILTERS,disableElevation:!0})]})}),(0,v.jsx)(N,{className:Ye,children:(0,v.jsx)(ce,{allowedRoles:ue.qj,children:(0,v.jsxs)(fe.Z,{maxWidth:"100%",children:[(0,v.jsx)("p",{children:m.GP.SHOW}),(0,v.jsx)(Ce,{tabList:A,selectHandler:function(e){l&&e&&(I(!0),setTimeout((function(){return x(O(l,e)),b(),Q.current.clearSelect(),I(!1)}),0))},ref:te})]})})}),(0,v.jsx)(N,{className:Ye,children:(0,v.jsxs)(fe.Z,{maxWidth:"100%",children:[(0,v.jsx)(ce,{allowedRoles:ue.qj,children:(0,v.jsxs)("div",{className:Ve,children:[(0,v.jsx)("p",{children:m.GP.FILTER}),(0,v.jsx)(Xe,{className:Ke,ref:ne,disableClearable:!0,propsType:"object",disabled:!(null!==l&&void 0!==l&&l.length),options:p,placeholder:m.yb.STRAIN,onChange:function(e,n){var t,a,r,i;l&&n&&(Z((a=c,r="materialStrainName",i=null!==(t=n.name)&&void 0!==t?t:"",a&&r&&i?(0,u.Z)(a).filter((function(e){return e[r]===i})):new Error("you should send all prams to make function work"))),b())}}),(0,v.jsx)(f.Z,{className:Je,"aria-describedby":Ae,variant:"contained",onClick:function(e){null!==l&&void 0!==l&&l.length&&ie(e.currentTarget)},disableElevation:!0,label:w}),(0,v.jsxs)(ln.ZP,{id:Ae,open:Te,anchorEl:le,onClose:ye,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[(0,v.jsx)(me.Dw,{onChange:function(e){return We(e)},months:2,color:"#ffeb3b",maxDate:new Date,ranges:[de.dateRange],direction:"horizontal",staticRanges:[],inputRanges:[]}),";"]})]})}),(0,v.jsxs)("div",{className:ze,children:[(0,v.jsx)("p",{children:m.GP.SORT}),(0,v.jsx)(Xe,{className:Qe,optionsWidth:"235px",ref:Q,disableClearable:!0,propsType:"object",disabled:!(null!==o&&void 0!==o&&o.length),options:hn,placeholder:m.yb.SORT_CRITERIA,onChange:function(e,n){return Le(n)}})]})]})}),(0,v.jsxs)(fe.Z,{maxWidth:"100%",children:[(0,v.jsx)(ce,{allowedRoles:ue.qj,children:(0,v.jsxs)("div",{className:$e,children:[(0,v.jsx)(f.Z,{onClick:function(){return function(){var e=(0,u.Z)(o);e=e.map((function(e){return(0,s.Z)((0,s.Z)({},e),{},{selected:!0})})),x(e),h(e)}()},label:m.lc.SELECT_ALL,classType:f.A.ACTION_SECONDARY_FORM_BTN}),(0,v.jsx)(f.Z,{onClick:function(){g.map((function(e){if(null===e||void 0===e||!e.locationId)return De("error","you shouldn't choose unplaced material ")})),console.log(g)},label:m.lc.UNPLACE,classType:f.A.ACTION_SECONDARY_FORM_BTN,disabled:!g.length}),(0,v.jsx)(f.Z,{label:m.lc.EXPIRE,classType:f.A.ACTION_SECONDARY_FORM_BTN,disabled:!g.length}),(0,v.jsx)(f.Z,{onClick:function(){var e;return 1!==g.length?De("error","you shouldn't choose more than one material "):null!==(e=g[0])&&void 0!==e&&e.expired?void we(!0):De("error","you should choose expired material ")},label:m.lc.UNEXPIRE,classType:f.A.ACTION_SECONDARY_FORM_BTN,disabled:1!==g.length})]})}),(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,xs:9,children:(0,v.jsx)(Pe,{progressLoading:W})}),(0,v.jsxs)(i.ZP,{item:!0,xs:3,children:[(0,v.jsx)(ce,{allowedRoles:ue.qj,children:(0,v.jsxs)("div",{className:en,children:[(0,v.jsx)(f.Z,{onClick:function(){return Oe("across")},label:m.lc.PLACE_ACROSS,className:nn,disableElevation:!0,disabled:Y}),(0,v.jsx)(f.Z,{onClick:function(){return Oe("down")},label:m.lc.PLACE_DOWN,className:nn,disableElevation:!0,disabled:Y})]})}),(0,v.jsxs)("p",{className:an,children:[(0,v.jsx)("span",{children:K}),"materials selected"]}),(0,v.jsxs)("p",{className:an,children:[(0,v.jsx)("span",{children:z}),"well selected"]}),Y&&K>0&&(0,v.jsx)("p",{className:rn,children:m.c9.MATERIALS_MORE_WELLS})]})]}),(0,v.jsx)(un,{open:ve,alertInfo:Ze}),(0,v.jsx)(mn,{title:m.f4.UNEXPIRE,handleCancelDialog:function(){return we(!1)},isOpen:Re,handleConfirmAction:function(){var e,n;(n=null===(e=g[0])||void 0===e?void 0:e.id,$().put("".concat(ee.Hp.BASE_URL,"?materialId=").concat(n))).then((function(e){_(P(l,[e],"id")),De("success",m.nS.UNEXPIRE_MATERIAL)})).catch((function(e){De("error",m.c9.CAN_NOT_UNEXPIRE_MATERIAL)})).finally((function(){we(!1)}))}})]})]})},_n={setSearchOnMaterialsFn:function(e){return{type:he.gg,materials:e}},updateAllMaterialsFn:function(e){return{type:he.tA,materials:e}},updateActiveWellsFn:function(e){return{type:he.SH,wells:e}},sortMaterialsFn:xe,resetSelectedMaterialsFn:_e,updateCurrentMaterialFn:je,setGroupSelectedMaterialsFn:function(e){return{type:he.Ql,materials:e}},setSelectedMaterialsFn:ve},jn=(0,J.$j)((function(e){return{materialListRedux:e.materials.materials,strainList:e.strains.strains,filteredMateriaRedux:e.materials.filteredMaterials,groupedMateriaRedux:e.materials.groupedMaterials,selectedMaterials:e.materials.selectedMaterials}}),_n)((0,r.memo)(vn));var Nn=t(492),Zn=t(3416),gn={mainPrimary:"#009dba",TopBarWrapper:"TopBar_TopBarWrapper__HNgYB",DropDownWrapper:"TopBar_DropDownWrapper__g19jG",DropDownStyle:"TopBar_DropDownStyle__r4wMN"},bn="MaterialCell_CellWrapper__B8xT4",Sn=["option"],Cn=function(e){var n=e.option,t=(0,h.Z)(e,Sn);return(0,v.jsx)("div",(0,s.Z)((0,s.Z)({className:bn},t),{},{children:(0,v.jsx)("div",{children:n.name})}))};var Rn=function(e){var n=e.getMaterialsListRedux,t=e.getDeviceConfigRedux,l=e.getStrainListRedux,i=(0,r.useState)([]),u=(0,a.Z)(i,2),p=u[0],h=u[1],x=(0,r.useState)(),_=(0,a.Z)(x,2),j=_[0],N=_[1],Z=(0,r.useState)([]),g=(0,a.Z)(Z,2),b=g[0],S=g[1],C=(0,r.useState)(),R=(0,a.Z)(C,2),w=R[0],D=R[1],y=function(){},T=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(a,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!r){e.next=9;break}return e.next=3,n(a.id,r);case 3:return e.next=5,t(a.deviceType.id,r);case 5:return e.next=7,l(a.id,r);case 7:e.next=10;break;case 9:console.error("materialTypeId is ".concat(a," or transGroupId ").concat(r));case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),A=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$().get(ee.ng.BASE_URL);case 2:n=e.sent,h(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$().get(ee.ud.BASE_URL);case 2:n=e.sent,S(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){A(),E()}),[]),(0,v.jsx)("div",{className:gn.TopBarWrapper,children:(0,v.jsxs)(d.Z,{maxWidth:"100%",children:[(0,v.jsxs)("div",{className:gn.DropDownWrapper,children:[(0,v.jsx)(Xe,{options:p,defaultValue:p[0],renderOption:function(e,n){return(0,v.jsx)("li",(0,s.Z)((0,s.Z)({},e),{},{children:(0,v.jsx)(Cn,{option:n},n.id)}))},propsType:"object",placeholder:m.yb.DNA_MATERIALS,onChange:function(e,n){N(n),w&&j&&T(n,w.id)},disableClearable:!0,optionsWidth:"130%",className:gn.DropDownStyle}),(0,v.jsx)(Xe,{presentsProps:"cropName",onChange:function(e,n){D(n),n&&j&&T(j,n.id)},options:b,propsType:"object",placeholder:m.yb.CROP_NAME,className:gn.DropDownStyle})]}),(0,v.jsx)(ce,{allowedRoles:ue.qj,children:(0,v.jsxs)("div",{className:gn.ActionWrapper,children:[(0,v.jsx)(f.Z,{onClick:y,label:m.lc.UNDO,classType:f.A.ACTION_SECONDARY_FORM_BTN,startIcon:(0,v.jsx)(Zn.Z,{})}),(0,v.jsx)(f.Z,{onClick:y,label:m.lc.REDO,classType:f.A.ACTION_SECONDARY_FORM_BTN,startIcon:(0,v.jsx)(Nn.Z,{})})]})})]})})},wn={getMaterialsListRedux:function(e,n){return function(t,a){if(!a().loadingMaterials)return t(Ne(!0)),function(e,n){return $().get("".concat(ee.Mw.BASE_URL,"?materialtypeId=").concat(e,"&transgroupId=").concat(n))}(e,n).then((function(e){var n;t(((n=e).map((function(e){return e.selected=!1})),{type:he.Vm,materials:n})),t(xe(e)),t(_e()),t(Ne(!1))})).catch((function(e){throw t(Ne(!1)),console.log("Error occurred while fetching the Materials list"),e}))}},getDeviceConfigRedux:function(e,n){return function(t,a){if(!a().loadingStrains)return function(e,n){return $().get("".concat(ee.AF.BASE_URL,"?deviceTypeId=").concat(e,"&transGroupId=").concat(n))}(e,n).then((function(e){t(function(e){return{type:he.Px,config:e}}(e))})).catch((function(e){throw console.log("Error occurred while fetching the config object"),e}))}},getStrainListRedux:function(e,n){return function(t,a){if(!a().loadingStrains)return function(e,n){return $().get("".concat(ee.rI.BASE_URL,"?materialtypeId=").concat(e,"&transgroupId=").concat(n))}(e,n).then((function(e){var n;e=e.map((function(e){return{name:e}})),t((n=e,{type:he.Qg,strains:n}))})).catch((function(e){throw console.log("Error occurred while fetching the strains list"),e}))}}},Dn=(0,J.$j)(null,wn)((0,r.memo)(Rn)),yn=function(){var e=(0,r.useState)(0),n=(0,a.Z)(e,2),t=n[0],s=n[1];return(0,v.jsxs)("div",{children:[" ",(0,v.jsxs)(l.Z,{sx:{flexGrow:1},children:[(0,v.jsx)(Dn,{}),(0,v.jsxs)(i.ZP,{container:!0,children:[(0,v.jsx)(i.ZP,{item:!0,xs:6,children:(0,v.jsx)(jn,{wellsInfo:t})}),(0,v.jsx)(i.ZP,{item:!0,xs:6,children:(0,v.jsx)(pe,{wellsInfoFn:function(e){return s(e)}})})]})]})]})},Tn=(0,r.memo)(yn)}}]);
//# sourceMappingURL=655.3fd6fd46.chunk.js.map